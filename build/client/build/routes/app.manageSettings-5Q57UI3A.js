import{a as f,b as x}from"/build/_shared/chunk-2Z2BTQU4.js";import{d as o}from"/build/_shared/chunk-ZT4QWOFN.js";var d=o(f(),1),e=o(x(),1);function h(){let[m,c]=(0,d.useState)("Europe/London"),[u,b]=(0,d.useState)(1),[v,g]=(0,d.useState)(2),[r,n]=(0,d.useState)({}),[i,p]=(0,d.useState)("");(0,d.useEffect)(()=>{fetch("/api/settings").then(t=>t.json()).then(t=>{t&&(c(t.timezone??"Europe/London"),b(t.defaultDespatchLead??1),g(t.defaultDeliveryLead??2),n(t.countryOverrides??{}))})},[]);let y=async()=>{p("Saving...");let a=await(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:m,defaultDespatchLead:u,defaultDeliveryLead:v,countryOverrides:r})})).json();p(a.ok?"\u2705 Saved successfully":"\u274C Error saving settings")};return(0,e.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Manage Store Settings"}),i&&(0,e.jsx)("div",{className:`mb-4 p-3 rounded-xl text-white ${i.startsWith("\u2705")?"bg-green-600":i.startsWith("\u274C")?"bg-red-600":"bg-blue-600"}`,children:i}),(0,e.jsxs)("div",{className:"p-4 bg-white shadow rounded-2xl mb-6",children:[(0,e.jsx)("h3",{className:"font-semibold mb-4 text-gray-700",children:"General Settings"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)("label",{className:"text-sm text-gray-600 mb-1",children:"Timezone"}),(0,e.jsx)("input",{className:"border p-2 rounded-md",value:m,onChange:t=>c(t.target.value)})]}),(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)("label",{className:"text-sm text-gray-600 mb-1",children:"Default Despatch Lead (days)"}),(0,e.jsx)("input",{type:"number",className:"border p-2 rounded-md",value:u,onChange:t=>b(Number(t.target.value))})]}),(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)("label",{className:"text-sm text-gray-600 mb-1",children:"Default Delivery Lead (days)"}),(0,e.jsx)("input",{type:"number",className:"border p-2 rounded-md",value:v,onChange:t=>g(Number(t.target.value))})]})]})]}),(0,e.jsxs)("div",{className:"p-4 bg-white shadow rounded-2xl mb-6",children:[(0,e.jsx)("h3",{className:"font-semibold mb-4 text-gray-700",children:"Country Overrides"}),Object.entries(r).map(([t,a])=>(0,e.jsxs)("div",{className:"grid grid-cols-4 gap-2 items-end mb-3",children:[(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)("label",{className:"text-xs text-gray-500 mb-1",children:"Country"}),(0,e.jsx)("input",{className:"border p-2 rounded-md w-full text-center",value:t,onChange:s=>{let l={...r};l[s.target.value]=a,s.target.value!==t&&delete l[t],n(l)},placeholder:"Country code"})]}),(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)("label",{className:"text-xs text-gray-500 mb-1",children:"Despatch Lead (days)"}),(0,e.jsx)("input",{type:"number",className:"border p-2 rounded-md w-full",value:a.despatchLead,onChange:s=>{let l={...r};l[t]={...a,despatchLead:Number(s.target.value)},n(l)}})]}),(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)("label",{className:"text-xs text-gray-500 mb-1",children:"Delivery Lead (days)"}),(0,e.jsx)("input",{type:"number",className:"border p-2 rounded-md w-full",value:a.deliveryLead,onChange:s=>{let l={...r};l[t]={...a,deliveryLead:Number(s.target.value)},n(l)}})]}),(0,e.jsx)("div",{className:"flex flex-col",children:(0,e.jsx)("button",{className:"bg-red-500 text-white px-2 py-1 rounded mt-5",onClick:()=>{let s={...r};delete s[t],n(s)},children:"Remove"})})]},t)),(0,e.jsx)("button",{className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>{let t={...r},a="NEW",s=1;for(;t[a];)a=`NEW${s++}`;t[a]={despatchLead:1,deliveryLead:1},n(t)},children:"Add Country"})]}),(0,e.jsx)("button",{onClick:y,className:"bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700 shadow",children:"Save Settings"})]})}export{h as default};
