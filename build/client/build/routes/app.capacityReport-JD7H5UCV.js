import{a as b}from"/build/_shared/chunk-VAO34ZN6.js";import{a as R,b as u}from"/build/_shared/chunk-2Z2BTQU4.js";import{d as p}from"/build/_shared/chunk-ZT4QWOFN.js";var s=p(R(),1);var t=p(u(),1),S=()=>{let f="/api/report",[n,N]=(0,s.useState)([]),[r,v]=(0,s.useState)(null),[h,m]=(0,s.useState)(!1),[o,C]=(0,s.useState)(""),[d,w]=(0,s.useState)(""),y=async()=>{try{m(!0);let a={};o&&(a.startDate=o),d&&(a.endDate=d);let{data:i}=await b.get(f,{params:a}),l=(i.report||[]).map(e=>({...e,totalCapacity:e.total,usedCapacity:e.used,remainingCapacity:e.total-e.used}));N(l);let D=l.length,x=l.reduce((e,c)=>e+c.totalCapacity,0),g=l.reduce((e,c)=>e+c.usedCapacity,0),k=x-g;v({totalDays:D,totalCapacity:x,usedCapacity:g,remainingCapacity:k})}catch(a){console.error("Error fetching capacity report:",a)}finally{m(!1)}};return(0,s.useEffect)(()=>{y()},[]),(0,t.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Capacity Report"}),(0,t.jsxs)("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),(0,t.jsx)("input",{type:"date",value:o,onChange:a=>C(a.target.value),className:"rounded-md border px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),(0,t.jsx)("input",{type:"date",value:d,onChange:a=>w(a.target.value),className:"rounded-md border px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-blue-500"})]}),(0,t.jsx)("button",{onClick:y,className:"mt-6 rounded-lg bg-blue-600 px-5 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Apply Filter"})]}),r&&(0,t.jsxs)("div",{className:"mb-6 rounded-lg border bg-gray-50 p-4 shadow-sm",children:[(0,t.jsx)("h3",{className:"mb-2 text-lg font-semibold text-gray-700",children:"Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total Days"}),(0,t.jsx)("p",{className:"font-semibold",children:r.totalDays})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total Capacity"}),(0,t.jsx)("p",{className:"font-semibold",children:r.totalCapacity})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Used Capacity"}),(0,t.jsx)("p",{className:"font-semibold text-blue-600",children:r.usedCapacity})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Remaining Capacity"}),(0,t.jsx)("p",{className:"font-semibold text-green-600",children:r.remainingCapacity})]})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto rounded-lg border shadow-sm bg-white",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Total Capacity"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Used Capacity"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Remaining"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:h?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):n.length>0?n.map((a,i)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-800",children:a.date.split("T")[0]}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-800",children:a.totalCapacity}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-blue-600 font-medium",children:a.usedCapacity}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-green-600 font-medium",children:a.remainingCapacity})]},i)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500 italic",children:"No records found."})})})]})})]})},T=S;export{T as default};
