import{w as p,r as n,j as e}from"./chunk-4WY6JWTD-BgPu_Zjs.js";const N=p(function(){const[c,o]=n.useState("Europe/London"),[m,x]=n.useState(1),[u,h]=n.useState(2),[r,d]=n.useState({}),[i,g]=n.useState("");n.useEffect(()=>{fetch("/api/settings").then(s=>s.json()).then(s=>{s&&(o(s.timezone??"Europe/London"),x(s.defaultDespatchLead??1),h(s.defaultDeliveryLead??2),d(s.countryOverrides??{}))})},[]);const b=async()=>{g("Saving...");const t=await(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:c,defaultDespatchLead:m,defaultDeliveryLead:u,countryOverrides:r})})).json();g(t.ok?"✅ Saved successfully":"❌ Error saving settings")};return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Manage Store Settings"}),i&&e.jsx("div",{className:`mb-4 p-3 rounded-xl text-white ${i.startsWith("✅")?"bg-green-600":i.startsWith("❌")?"bg-red-600":"bg-blue-600"}`,children:i}),e.jsxs("div",{className:"p-4 bg-white shadow rounded-2xl mb-6",children:[e.jsx("h3",{className:"font-semibold mb-4 text-gray-700",children:"General Settings"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1",children:"Timezone"}),e.jsx("input",{className:"border p-2 rounded-md",value:c,onChange:s=>o(s.target.value)})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1",children:"Default Despatch Lead (days)"}),e.jsx("input",{type:"number",className:"border p-2 rounded-md",value:m,onChange:s=>x(Number(s.target.value))})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1",children:"Default Delivery Lead (days)"}),e.jsx("input",{type:"number",className:"border p-2 rounded-md",value:u,onChange:s=>h(Number(s.target.value))})]})]})]}),e.jsxs("div",{className:"p-4 bg-white shadow rounded-2xl mb-6",children:[e.jsx("h3",{className:"font-semibold mb-4 text-gray-700",children:"Country Overrides"}),Object.entries(r).map(([s,t])=>e.jsxs("div",{className:"grid grid-cols-4 gap-2 items-end mb-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Country"}),e.jsx("input",{className:"border p-2 rounded-md w-full text-center",value:s,onChange:a=>{const l={...r};l[a.target.value]=t,a.target.value!==s&&delete l[s],d(l)},placeholder:"Country code"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Despatch Lead (days)"}),e.jsx("input",{type:"number",className:"border p-2 rounded-md w-full",value:t.despatchLead,onChange:a=>{const l={...r};l[s]={...t,despatchLead:Number(a.target.value)},d(l)}})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Delivery Lead (days)"}),e.jsx("input",{type:"number",className:"border p-2 rounded-md w-full",value:t.deliveryLead,onChange:a=>{const l={...r};l[s]={...t,deliveryLead:Number(a.target.value)},d(l)}})]}),e.jsx("div",{className:"flex flex-col",children:e.jsx("button",{className:"bg-red-500 text-white px-2 py-1 rounded mt-5",onClick:()=>{const a={...r};delete a[s],d(a)},children:"Remove"})})]},s)),e.jsx("button",{className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>{const s={...r};let t="NEW",a=1;for(;s[t];)t=`NEW${a++}`;s[t]={despatchLead:1,deliveryLead:1},d(s)},children:"Add Country"})]}),e.jsx("button",{onClick:b,className:"bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700 shadow",children:"Save Settings"})]})});export{N as default};
