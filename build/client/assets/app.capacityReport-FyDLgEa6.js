import{w as v,r as s,j as e}from"./chunk-4WY6JWTD-BgPu_Zjs.js";import{a as w}from"./index-B9ygI19o.js";const D=()=>{const g="/api/report",[o,h]=s.useState([]),[r,u]=s.useState(null),[b,x]=s.useState(!1),[l,j]=s.useState(""),[i,f]=s.useState(""),p=async()=>{try{x(!0);const t={};l&&(t.startDate=l),i&&(t.endDate=i);const{data:d}=await w.get(g,{params:t}),c=(d.report||[]).map(a=>({...a,totalCapacity:a.total,usedCapacity:a.used,remainingCapacity:a.total-a.used}));h(c);const N=c.length,m=c.reduce((a,n)=>a+n.totalCapacity,0),y=c.reduce((a,n)=>a+n.usedCapacity,0),C=m-y;u({totalDays:N,totalCapacity:m,usedCapacity:y,remainingCapacity:C})}catch(t){console.error("Error fetching capacity report:",t)}finally{x(!1)}};return s.useEffect(()=>{p()},[]),e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Capacity Report"}),e.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),e.jsx("input",{type:"date",value:l,onChange:t=>j(t.target.value),className:"rounded-md border px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),e.jsx("input",{type:"date",value:i,onChange:t=>f(t.target.value),className:"rounded-md border px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsx("button",{onClick:p,className:"mt-6 rounded-lg bg-blue-600 px-5 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Apply Filter"})]}),r&&e.jsxs("div",{className:"mb-6 rounded-lg border bg-gray-50 p-4 shadow-sm",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-700",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Days"}),e.jsx("p",{className:"font-semibold",children:r.totalDays})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Capacity"}),e.jsx("p",{className:"font-semibold",children:r.totalCapacity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Used Capacity"}),e.jsx("p",{className:"font-semibold text-blue-600",children:r.usedCapacity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Remaining Capacity"}),e.jsx("p",{className:"font-semibold text-green-600",children:r.remainingCapacity})]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border shadow-sm bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Total Capacity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Used Capacity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600",children:"Remaining"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:b?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):o.length>0?o.map((t,d)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-800",children:t.date.split("T")[0]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-800",children:t.totalCapacity}),e.jsx("td",{className:"px-6 py-4 text-sm text-blue-600 font-medium",children:t.usedCapacity}),e.jsx("td",{className:"px-6 py-4 text-sm text-green-600 font-medium",children:t.remainingCapacity})]},d)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500 italic",children:"No records found."})})})]})})]})},k=v(D);export{k as default};
